{
  "$schema": "http://json-schema.org/draft/2019-09/schema#",
  "$id": "https://digital.education.gov.uk/schema/track_and_pay/schemas/ecf.json/#",
  "$version": "0.0.1a",
  "input": {
    "type": "object",
    "properties": {
      "recruitment_target": {
        "type": "integer"
      },
      "band_a": {
        "type": "integer"
      },
      "retained_participants": {
        "$comment": "May be controversial, and this schema will break until it's resolved, but should be have more than one property sent, or is this actually an event",
        "type": "object",
        "minProperties": 1,
        "maxProperties": 1,
        "properties": {
          "$comment": "Not a fixed point in time. May need times against each value as well as the integer",
          "Start": {
            "type": "integer"
          },
          "Retention 1": {
            "type": "integer"
          },
          "Retention 2": {
            "type": "integer"
          },
          "Retention 3": {
            "type": "integer"
          },
          "Retention 4": {
            "type": "integer"
          },
          "Completion": {
            "type": "integer"
          }
        },
        "required": [
          "Start",
          "Retention 1",
          "Retention 2",
          "Retention 3",
          "Retention 4",
          "Completion"
        ]
      }
    },
    "required": [
      "recruitment_target",
      "band_a",
      "retained_participants"
    ]

  },
  "output": {
    "type": "object",
    "properties": {
      "service_fees": {
        "type": "object",
        "properties": {
          "per_participant": {
            "type": "number"
          },
          "total": {
            "type": "number"
          },
          "monthly": {
            "type": "array",
            "items": {
              "type": "number"
            }
          }
        },
        "required": [
          "per_participant",
          "total",
          "monthly"
        ]
      },
      "output_payment": {
        "type": "object",
        "properties": {
          "per_participant": "number",
          "output_payment_schedule": {
            "type": "object",
            "properties": {
              "payment_type": {
                "type": "object",
                "properties": {
                  "Start": {
                    "type": "object",
                    "properties": {
                      "retained_participants": {
                        "type": "integer"
                      },
                      "per_participant": {
                        "type": "number"
                      },
                      "subtotal": {
                        "type": "number"
                      }
                    }
                  },
                  "Retention 1": {
                    "type": "object",
                    "properties": {
                      "retained_participants": {
                        "type": "integer"
                      },
                      "per_participant": {
                        "type": "number"
                      },
                      "subtotal": {
                        "type": "number"
                      }
                    }
                  },
                  "Retention 2": {
                    "type": "object",
                    "properties": {
                      "retained_participants": {
                        "type": "integer"
                      },
                      "per_participant": {
                        "type": "number"
                      },
                      "subtotal": {
                        "type": "number"
                      }
                    }
                  },
                  "Retention 3": {
                    "type": "object",
                    "properties": {
                      "retained_participants": {
                        "type": "integer"
                      },
                      "per_participant": {
                        "type": "number"
                      },
                      "subtotal": {
                        "type": "number"
                      }
                    }
                  },
                  "Retention 4": {
                    "type": "object",
                    "properties": {
                      "retained_participants": {
                        "type": "integer"
                      },
                      "per_participant": {
                        "type": "number"
                      },
                      "subtotal": {
                        "type": "number"
                      }
                    }
                  },
                  "Completion": {
                    "type": "object",
                    "properties": {
                      "retained_participants": {
                        "type": "integer"
                      },
                      "per_participant": {
                        "type": "number"
                      },
                      "subtotal": {
                        "type": "number"
                      }
                    }
                  }
                }
              },
              "retained_participants": {
                "type": "object"
              }
            }
          }
        },
        "required": [
          "per_participant",
          "output_payment_schedule"
        ]
      }
    },
    "required": ["service_fees", "output_payment"]
  }
}
